
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CLI plugins &#8212; indy-docs 1.0 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cli-plugins">
<span id="cli-plugins"></span><h1>CLI plugins<a class="headerlink" href="#cli-plugins" title="Permalink to this headline">¶</a></h1>
<p>This design proposes the way to support plugins in Indy CLI.</p>
<div class="section" id="goals-and-ideas">
<span id="goals-and-ideas"></span><h2>Goals and ideas<a class="headerlink" href="#goals-and-ideas" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Libindy now allows to plug 2 type of functionality for the moment:<ul>
<li>Custom wallet storage</li>
<li>Custom payment methods</li>
</ul>
</li>
<li>To register plugins libindy provides API calls that allows to register C-handlers for each type of plugged operation</li>
<li>In current vision libraries that implement libindy plugins should provide some kind of public “init” function that will call internally libindy API to register handlers. So registration of plugin is just calling of C function.</li>
<li>“Init” function should have just one param. It is callback that returns libindy error code.</li>
<li>CLI can provide command line option that will allow to point the name of plugin dynamic library and the name of “init” function. On start CLI will call dlopen (or LoadLibrary) with right options to perform names linking. CLI will lookup for init function by name and call it.</li>
<li>Also we need to provide CLI command to load plugin similar way</li>
</ul>
</div>
<div class="section" id="linking">
<span id="linking"></span><h2>Linking<a class="headerlink" href="#linking" title="Permalink to this headline">¶</a></h2>
<p><img alt="Linking" src="../../../../../_images/cli-plugins5.svg" /></p>
</div>
<div class="section" id="command-line-param-to-load-plugins-on-start">
<span id="command-line-param-to-load-plugins-on-start"></span><h2>Command line param to load plugins on start<a class="headerlink" href="#command-line-param-to-load-plugins-on-start" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>indy-cli --plugins &lt;lib-1-name&gt;:&lt;init-func-1-name&gt;,...,&lt;lib-n-name&gt;:&lt;init-func-n-name&gt;
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>indy-cli --plugins libnullpay:nullpay_init,libstorage:storage_init
</pre></div>
</div>
</div>
<div class="section" id="command-to-load-plugin">
<span id="command-to-load-plugin"></span><h2>Command to load plugin<a class="headerlink" href="#command-to-load-plugin" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>indy&gt; load-plugin <span class="nv">library</span><span class="o">=</span>&lt;library-name&gt; <span class="nv">initializer</span><span class="o">=</span>&lt;init-func-name&gt;
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>indy&gt; load-plugin <span class="nv">library</span><span class="o">=</span>libnullpay <span class="nv">initializer</span><span class="o">=</span>nullpay_init
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CLI plugins</a><ul>
<li><a class="reference internal" href="#goals-and-ideas">Goals and ideas</a></li>
<li><a class="reference internal" href="#linking">Linking</a></li>
<li><a class="reference internal" href="#command-line-param-to-load-plugins-on-start">Command line param to load plugins on start</a></li>
<li><a class="reference internal" href="#command-to-load-plugin">Command to load plugin</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/indy-sdk/v1.6.4/doc/design/006-cli-plugins/README.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Michael McKean.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>