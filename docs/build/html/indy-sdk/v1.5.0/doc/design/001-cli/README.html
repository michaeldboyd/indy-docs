
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Indy CLI Design &#8212; indy-docs 1.0 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="indy-cli-design">
<span id="indy-cli-design"></span><h1>Indy CLI Design<a class="headerlink" href="#indy-cli-design" title="Permalink to this headline">¶</a></h1>
<div class="section" id="re-implementation-of-cli">
<span id="re-implementation-of-cli"></span><h2>Re-implementation of CLI<a class="headerlink" href="#re-implementation-of-cli" title="Permalink to this headline">¶</a></h2>
<p>This proposal follow the idea to re-implement CLI from scratch. Main reasons are:</p>
<ul class="simple">
<li>Existing code base is written in hard-to support way.</li>
<li>Existing code base is too far from libindy entities model.</li>
<li>Existing code base requires complex runtime (python) and additional dependencies (python libindy wrapper) that complicates deployment.</li>
<li>It is just cheaper to re-implement CLI than to perform deep refactoring.</li>
</ul>
</div>
<div class="section" id="use-rust-language">
<span id="use-rust-language"></span><h2>Use Rust language<a class="headerlink" href="#use-rust-language" title="Permalink to this headline">¶</a></h2>
<p>We propose to re-implement CLI in Rust. Main reasons are:</p>
<ul class="simple">
<li>Main libindy code base uses Rust. Team has deep Rust experience.</li>
<li>No need to big runtime, small list of dependencies. As result simple packaging and deployment.</li>
<li>Rust is nice and reliable cross-platform solution for native apps.</li>
</ul>
</div>
<div class="section" id="terminal-input-output-handling">
<span id="terminal-input-output-handling"></span><h2>Terminal input-output handling<a class="headerlink" href="#terminal-input-output-handling" title="Permalink to this headline">¶</a></h2>
<p>To handle complex terminal input, history and autocompletion support on different terminals linefeed crate will be used (few additional alternatives are also available). To handle colored terminal output ansi_term crate will be used.</p>
</div>
<div class="section" id="auto-completion">
<span id="auto-completion"></span><h2>Auto completion<a class="headerlink" href="#auto-completion" title="Permalink to this headline">¶</a></h2>
<p>The following autocompletion will be provided through readline infrastructure:</p>
<ul class="simple">
<li>Command group name completion</li>
<li>Command name completion</li>
<li>Command param name completion</li>
</ul>
</div>
<div class="section" id="libindy-wrapper">
<span id="libindy-wrapper"></span><h2>Libindy wrapper<a class="headerlink" href="#libindy-wrapper" title="Permalink to this headline">¶</a></h2>
<p>CLI project will contain simple synchronous libindy wrapper:</p>
<ul class="simple">
<li>Code from libindy tests that provides similar wrapper will be partially reused.</li>
<li>Synchronization will be performed through Rust channels:<ul>
<li>Main thread creates channel and closure that will send message to this channel.</li>
<li>Calls libindy and puts this closure as callback.</li>
<li>Blocks on reading from channel.</li>
</ul>
</li>
</ul>
<p>As channel reading assumes timeouts it will be possible to emulate progress updating .</p>
</div>
<div class="section" id="threading-model">
<span id="threading-model"></span><h2>Threading model<a class="headerlink" href="#threading-model" title="Permalink to this headline">¶</a></h2>
<p>There will be one main thread that will perform io operations with terminal and libindy calls synchronized through Rust’s channel. Blocking will be limited by small channel read timeout.</p>
</div>
<div class="section" id="execution-modes">
<span id="execution-modes"></span><h2>Execution modes<a class="headerlink" href="#execution-modes" title="Permalink to this headline">¶</a></h2>
<p>CLI will support 2 execution modes:</p>
<ul class="simple">
<li>Interactive. In this mode CLI will read commands from terminal interactively.</li>
<li>Batch. In this code all commands will be read from file or pipe and executed in series.</li>
</ul>
</div>
<div class="section" id="code-structure">
<span id="code-structure"></span><h2>Code structure<a class="headerlink" href="#code-structure" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>CLI code will define “Command” structure that will be container for:<ul>
<li>Command meta information (name, command help, supported params, params help)</li>
<li>“Executor” function that will contain command execution logic</li>
<li>“Cleaner” function that will contain command cleanup logic</li>
</ul>
</li>
<li>Each command will be implemented as Rust module with one public “new” function that returns configured “Command” instance</li>
<li>All commands will share one “CommandContext”. “CommandContext” will hold application state and contain 2 parts:<ul>
<li>Pre-defined application part. Part that holds application-level state like command prompt, isExit flag and etc…</li>
<li>Generic command specific part. This part will be key-value storage that will allow commands to store command-specific data like Indy SDK handles, used DID and etc…</li>
</ul>
</li>
<li>“Executor” and “Cleaner” functions will get CommandContext as parameter</li>
<li>Actual execution of commands will be performed by CommandExecutor class. This class will:<ul>
<li>Instantiation of shared “CommandContext”</li>
<li>Hold all commands and command grouping info</li>
<li>Parse command lines according to commands meta information and search for relevant command</li>
<li>Triggering of command execution</li>
<li>Provide line auto completion logic</li>
<li>Triggerid of command cleanup
Command instances will optionally share few contexts:</li>
</ul>
</li>
<li>EntryPoint will:</li>
<li>Instantiate CommandExecutor and provide commands to command executor instance.</li>
<li>Determine execution mode.<ul>
<li>In interactive mode it will start readline cycle and execute each line with CommandExecutor until Exit command received.</li>
<li>In batch mode it will execute each command in the list and finish execution after completion of all commands.</li>
</ul>
</li>
</ul>
<p>See diagram:</p>
<p><img src="./cli-components.svg"></p>
</div>
<div class="section" id="commands">
<span id="commands"></span><h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>Command format</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="p">[[</span><span class="o">&lt;</span><span class="n">main_param_name</span><span class="o">&gt;=</span><span class="p">]</span><span class="o">&lt;</span><span class="n">main_param_value</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">param_name1</span><span class="o">&gt;=&lt;</span><span class="n">param_value1</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">...</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">param_nameN</span><span class="o">&gt;=&lt;</span><span class="n">param_valueN</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="common-commands">
<span id="common-commands"></span><h3>Common commands<a class="headerlink" href="#common-commands" title="Permalink to this headline">¶</a></h3>
<div class="section" id="help">
<span id="help"></span><h4>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h4>
<p>Print list of groups with group help:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">help</span>
</pre></div>
</div>
<p>Print list of group commands with command help:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span> <span class="n">help</span>
</pre></div>
</div>
<p>Print command help, list of command param and help for each param:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="n">help</span>
</pre></div>
</div>
</div>
<div class="section" id="about">
<span id="about"></span><h4>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h4>
<p>Print about and license info:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">about</span>
</pre></div>
</div>
</div>
<div class="section" id="exit">
<span id="exit"></span><h4>Exit<a class="headerlink" href="#exit" title="Permalink to this headline">¶</a></h4>
<p>Exit from CLI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">exit</span>
</pre></div>
</div>
</div>
<div class="section" id="prompt">
<span id="prompt"></span><h4>Prompt<a class="headerlink" href="#prompt" title="Permalink to this headline">¶</a></h4>
<p>Change command prompt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">prompt</span> <span class="o">&lt;</span><span class="n">new_prompt</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="show">
<span id="show"></span><h4>Show<a class="headerlink" href="#show" title="Permalink to this headline">¶</a></h4>
<p>Print content of file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">show</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">file_path</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="load-plugin">
<span id="load-plugin"></span><h4>Load Plugin<a class="headerlink" href="#load-plugin" title="Permalink to this headline">¶</a></h4>
<p>Load plugin in Libindy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">load</span><span class="o">-</span><span class="n">plugin</span> <span class="n">library</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">/</span><span class="n">path</span><span class="o">&gt;</span> <span class="n">initializer</span><span class="o">=&lt;</span><span class="n">init_function</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="wallets-management-commands-wallet-group">
<span id="wallets-management-commands-wallet-group"></span><h3>Wallets management commands (wallet group)<a class="headerlink" href="#wallets-management-commands-wallet-group" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="wallet-create">
<span id="wallet-create"></span><h4>Wallet create<a class="headerlink" href="#wallet-create" title="Permalink to this headline">¶</a></h4>
<p>Create new wallet with specified name and pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="n">create</span> <span class="o">&lt;</span><span class="n">wallet</span> <span class="n">name</span><span class="o">&gt;</span> <span class="n">pool_name</span><span class="o">=&lt;</span><span class="n">pool</span> <span class="n">name</span><span class="o">&gt;</span> <span class="n">key</span><span class="o">=&lt;</span><span class="n">key</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>TODO: Think about custom wallet types support. Now we force default wallet security model..</p>
</div>
<div class="section" id="wallet-open">
<span id="wallet-open"></span><h4>Wallet open<a class="headerlink" href="#wallet-open" title="Permalink to this headline">¶</a></h4>
<p>Open the wallet with specified name and make it available for commands that require wallet. If there was opened wallet it will be closed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="nb">open</span> <span class="o">&lt;</span><span class="n">wallet</span> <span class="n">name</span><span class="o">&gt;</span> <span class="n">key</span><span class="o">=&lt;</span><span class="n">key</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">rekey</span><span class="o">=&lt;</span><span class="n">rekey</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="wallet-close">
<span id="wallet-close"></span><h4>Wallet close<a class="headerlink" href="#wallet-close" title="Permalink to this headline">¶</a></h4>
<p>Close the opened wallet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="n">close</span>
</pre></div>
</div>
</div>
<div class="section" id="wallet-delete">
<span id="wallet-delete"></span><h4>Wallet delete<a class="headerlink" href="#wallet-delete" title="Permalink to this headline">¶</a></h4>
<p>Delete the opened wallet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="n">delete</span> <span class="o">&lt;</span><span class="n">wallet</span> <span class="n">name</span><span class="o">&gt;</span> <span class="n">key</span><span class="o">=&lt;</span><span class="n">key</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="wallet-list">
<span id="wallet-list"></span><h4>Wallet list<a class="headerlink" href="#wallet-list" title="Permalink to this headline">¶</a></h4>
<p>List all created wallets with corresponded status (indicates opened one):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">indy</span><span class="o">&gt;</span> <span class="n">wallet</span> <span class="nb">list</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="export-wallet">
<span id="export-wallet"></span><h3>Export wallet<a class="headerlink" href="#export-wallet" title="Permalink to this headline">¶</a></h3>
<p>Exports opened wallet to the specified file.</p>
<div class="highlight-indy-cli notranslate"><div class="highlight"><pre><span></span>indy&gt; wallet export export_path=&lt;path-to-file&gt; export_key=[&lt;export key&gt;]
</pre></div>
</div>
</div>
<div class="section" id="import-wallet">
<span id="import-wallet"></span><h3>Import wallet<a class="headerlink" href="#import-wallet" title="Permalink to this headline">¶</a></h3>
<p>Create new wallet and then import content from the specified file.</p>
<div class="highlight-indy-cli notranslate"><div class="highlight"><pre><span></span>indy&gt; wallet import &lt;wallet name&gt; pool_name=&lt;pool name&gt; key=&lt;key&gt; export_path=&lt;path-to-file&gt; export_key=&lt;key used for export&gt;


### Pool management commands
</pre></div>
</div>
<p>indy&gt; pool <subcommand></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Create config</span>
<span class="n">Create</span> <span class="n">name</span> <span class="n">pool</span> <span class="p">(</span><span class="n">network</span><span class="p">)</span> <span class="n">configuration</span>
</pre></div>
</div>
<p>indy&gt; pool create [name=]<pool name> gen_txn_file=<gen txn file path></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Connect</span>
<span class="n">Connect</span> <span class="n">to</span> <span class="n">Indy</span> <span class="n">nodes</span> <span class="n">pool</span> <span class="ow">and</span> <span class="n">make</span> <span class="n">it</span> <span class="n">available</span> <span class="k">for</span> <span class="n">operation</span> <span class="n">that</span> <span class="n">require</span> <span class="n">pool</span> <span class="n">access</span><span class="o">.</span> <span class="n">If</span> <span class="n">there</span> <span class="n">was</span> <span class="n">pool</span> <span class="n">connection</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">disconnected</span><span class="o">.</span>
</pre></div>
</div>
<p>indy&gt; pool connect [name=]<pool name> [protocol-version=<version>]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Disconnect</span>
<span class="n">Disconnect</span> <span class="kn">from</span> <span class="nn">Indy</span> <span class="n">nodes</span> <span class="n">pool</span>
</pre></div>
</div>
<p>indy&gt; pool disconnect</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### List</span>
<span class="n">List</span> <span class="nb">all</span> <span class="n">created</span> <span class="n">pools</span> <span class="n">configurations</span> <span class="k">with</span> <span class="n">status</span> <span class="p">(</span><span class="n">indicates</span> <span class="n">connected</span> <span class="n">one</span><span class="p">)</span>
</pre></div>
</div>
<p>indy&gt; pool list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">### Identity Management</span>
</pre></div>
</div>
<p>indy&gt; did <subcommand></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### New</span>
<span class="n">Create</span> <span class="ow">and</span> <span class="n">store</span> <span class="n">my</span> <span class="n">DID</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">opened</span> <span class="n">wallet</span><span class="o">.</span> <span class="n">Requires</span> <span class="n">opened</span> <span class="n">wallet</span><span class="o">.</span>
</pre></div>
</div>
<p>indy&gt; did new [did=<did>] [seed=<seed str>] [metadata=<metadata string>]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### List</span>
<span class="n">List</span> <span class="n">my</span> <span class="n">DIDs</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">opened</span> <span class="n">wallet</span> <span class="k">as</span> <span class="n">table</span> <span class="p">(</span><span class="n">did</span><span class="p">,</span> <span class="n">verkey</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span><span class="o">.</span> <span class="n">Requires</span> <span class="n">wallet</span> <span class="n">to</span> <span class="n">be</span> <span class="n">opened</span><span class="o">.</span><span class="p">:</span>
</pre></div>
</div>
<p>indy&gt; did list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Use</span>
<span class="n">Use</span> <span class="n">the</span> <span class="n">DID</span> <span class="k">as</span> <span class="n">identity</span> <span class="n">owner</span> <span class="k">for</span> <span class="n">commands</span> <span class="n">that</span> <span class="n">require</span> <span class="n">identity</span> <span class="n">owner</span><span class="p">:</span>
</pre></div>
</div>
<p>indy&gt; did use [did=]<did></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Rotate key</span>
<span class="n">Rotate</span> <span class="n">keys</span> <span class="k">for</span> <span class="n">used</span> <span class="n">DID</span><span class="o">.</span> <span class="n">Sends</span> <span class="n">NYM</span> <span class="n">to</span> <span class="n">the</span> <span class="n">ledger</span> <span class="k">with</span> <span class="n">updated</span> <span class="n">keys</span><span class="o">.</span> <span class="n">Requires</span> <span class="n">opened</span> <span class="n">wallet</span> <span class="ow">and</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">pool</span><span class="p">:</span>
</pre></div>
</div>
<p>indy&gt; did rotate-key [seed=<seed str>]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">### Ledger transactions/messages</span>
</pre></div>
</div>
<p>indy&gt; ledger <subcommand></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### NYM transaction</span>
<span class="n">Send</span> <span class="n">NYM</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger nym did=&lt;did-value&gt; [verkey=&lt;verkey-value&gt;] [role=&lt;role-value&gt;] [fees_inputs=&lt;utxo-1,..,utxo-n&gt;] [fees_outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_NYM transaction</span>
<span class="n">Send</span> <span class="n">GET_NYM</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger get-nym did=&lt;did-value&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### ATTRIB transaction</span>
<span class="n">Send</span> <span class="n">ATTRIB</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger attrib did=&lt;did-value&gt; [hash=&lt;hash-value&gt;] [raw=&lt;raw-value&gt;] [enc=&lt;enc-value&gt;]  [fees_inputs=&lt;utxo-1,..,utxo-n&gt;] [fees_outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_ATTRIB transaction</span>
<span class="n">Send</span> <span class="n">GET_ATTRIB</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger get-attrib did=&lt;did-value&gt; [raw=&lt;raw-value&gt;] [hash=&lt;hash-value&gt;] [enc=&lt;enc-value&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### SCHEMA transaction</span>
<span class="n">Send</span> <span class="n">SCHEMA</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger schema name=&lt;name-value&gt; version=&lt;version-value&gt; attr_names=&lt;attr_names-value&gt;  [fees_inputs=&lt;utxo-1,..,utxo-n&gt;] [fees_outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_SCHEMA transaction</span>
</pre></div>
</div>
<p>ledger get-schema did=&lt;did-value&gt; name=&lt;name-value&gt; version=&lt;version-value&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### CRED_DEF transaction</span>
<span class="n">Send</span> <span class="n">CRED_DEF</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger cred-def schema_id=&lt;schema_id-value&gt; signature_type=&lt;signature_type-value&gt; [tag=<tag>] primary=&lt;primary-value&gt; [revocation=&lt;revocation-value&gt;]  [fees_inputs=&lt;utxo-1,..,utxo-n&gt;] [fees_outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_CRED_DEF transaction</span>
<span class="n">Send</span> <span class="n">GET_CRED_DEF</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger get-cred-def schema_id=&lt;schema_id-value&gt; signature_type=&lt;signature_type-value&gt; origin=&lt;origin-value&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### NODE transaction</span>
<span class="n">Send</span> <span class="n">NODE</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger node target=&lt;target-value&gt; node_ip=&lt;node_ip-value&gt; node_port=&lt;node_port-value&gt; client_ip=&lt;client_ip-value&gt; client_port=&lt;client_port-value&gt; alias=&lt;alias-value&gt; blskey=&lt;blskey-value&gt; [services=&lt;services-value&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_VALIDATOR_INFO transaction</span>
<span class="n">Send</span> <span class="n">GET_VALIDATOR_INFO</span> <span class="n">transaction</span> <span class="n">to</span> <span class="n">get</span> <span class="n">info</span> <span class="kn">from</span> <span class="nn">all</span> <span class="n">nodes</span>
</pre></div>
</div>
<p>ledger get-validator-info</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### POOL_UPGRADE transaction</span>
<span class="n">Send</span> <span class="n">POOL_UPGRADE</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger pool-upgrade name=<name> version=<version> action=<start or cancel> sha256=<sha256> [timeout=<timeout>] [schedule=<schedule>] [justification=<justification>] [reinstall=&lt;true or false (default false)&gt;] [force=&lt;true or false (default false)&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### POOL_CONFIG transaction</span>
<span class="n">Send</span> <span class="n">POOL_CONFIG</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger pool-config writes=&lt;true or false (default false)&gt; [force=&lt;true or false (default false)&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### POOL_RESTART transaction</span>
<span class="n">Send</span> <span class="n">POOL_RESTART</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger pool-restart action=<start or cancel> [datetime=<datetime>]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Custom transaction</span>
<span class="n">Send</span> <span class="n">custom</span> <span class="n">transaction</span> <span class="k">with</span> <span class="n">user</span> <span class="n">defined</span> <span class="n">json</span> <span class="n">body</span> <span class="ow">and</span> <span class="n">optional</span> <span class="n">signature</span>
</pre></div>
</div>
<p>ledger custom [txn=]&lt;txn-json-value&gt; [sign=&lt;true|false&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_UTXO transaction</span>
<span class="n">Send</span> <span class="n">GET_UTXO</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger get-utxo payment_address=&lt;payment_address&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### PAYMENT transaction</span>
<span class="n">Send</span> <span class="n">PAYMENT</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger payment inputs=&lt;utxo-1&gt;,..,&lt;utxo-n&gt; outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### GET_FEES transaction</span>
<span class="n">Send</span> <span class="n">GET_FEES</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger get-fees payment_address=&lt;payment_address&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### MINT transaction</span>
<span class="n">Prepare</span> <span class="n">MINT</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger mint-prepare outputs=(&lt;pay-addr-1&gt;,<amount>,<extra>),..,(&lt;pay-addr-n&gt;,<amount>,<extra>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### SET_FEES transaction</span>
<span class="n">Prepare</span> <span class="n">SET_FEES</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger set-fees-prepare payment_method=&lt;payment_method&gt; fees=&lt;txn-type-1&gt;:&lt;amount-1&gt;,..,&lt;txn-type-n&gt;:&lt;amount-n&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Add multi signature to transaction</span>
<span class="n">Add</span> <span class="n">multi</span> <span class="n">signature</span> <span class="n">by</span> <span class="n">current</span> <span class="n">DID</span> <span class="n">to</span> <span class="n">transaction</span>
</pre></div>
</div>
<p>ledger sign-multi txn=&lt;txn_json&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">### Payment Address commands</span>
</pre></div>
</div>
<p>indy&gt; payment-address <subcommand></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Create</span>
<span class="n">Create</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">address</span> <span class="k">for</span> <span class="n">specified</span> <span class="n">payment</span> <span class="n">method</span><span class="o">.</span> <span class="n">Requires</span> <span class="n">opened</span> <span class="n">wallet</span><span class="o">.</span>
</pre></div>
</div>
<p>payment-address create payment_method=&lt;payment_method&gt; [seed=&lt;seed-value&gt;]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### List</span>
<span class="n">Lists</span> <span class="nb">all</span> <span class="n">payment</span> <span class="n">addresses</span><span class="o">.</span> <span class="n">Requires</span> <span class="n">opened</span> <span class="n">wallet</span><span class="o">.</span>
</pre></div>
</div>
<p>payment-address list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">## Examples</span>

<span class="c1">#### Create pool configuration and connect to pool</span>
</pre></div>
</div>
<p>indy&gt; pool create sandbox gen_txn_file=/etc/sovrin/sandbox.txn
indy&gt; pool connect sandbox
pool(sandbox):indy&gt; pool list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Create and open wallet</span>
</pre></div>
</div>
<p>sandbox|indy&gt; wallet create alice_wallet pool_name=sandbox
sandbox|indy&gt; wallet open alice_wallet
pool(sandbox):wallet(alice_wallet):indy&gt; wallet list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Create DID in the wallet from seed and use it for the next commands</span>
</pre></div>
</div>
<p>pool(sandbox):wallet(alice_wallet):indy&gt; did new seed=SEED0000000000000000000000000001 metadata=”Alice DID”
pool(sandbox):wallet(alice_wallet):indy&gt; did use MYDID000000000000000000001
pool(sandbox):wallet(alice_wallet):did(MYD…001):indy&gt; did list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Create new DID for BOB</span>
</pre></div>
</div>
<p>pool(sandbox):wallet(alice_wallet):did(MYD…001):indy&gt; did new metadata=”Bob DID”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Post new NYM to the ledger</span>
</pre></div>
</div>
<p>pool(sandbox):wallet(alice_wallet):did(MYD…001):indy&gt; ledger nym did=MYDID000000000000000000001</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#### Send GET_NYM transaction</span>
</pre></div>
</div>
<p>pool(sandbox):wallet(alice_wallet):did(MYD…001):indy&gt; ledger get-nym did=MYDID000000000000000000001</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Indy CLI Design</a><ul>
<li><a class="reference internal" href="#re-implementation-of-cli">Re-implementation of CLI</a></li>
<li><a class="reference internal" href="#use-rust-language">Use Rust language</a></li>
<li><a class="reference internal" href="#terminal-input-output-handling">Terminal input-output handling</a></li>
<li><a class="reference internal" href="#auto-completion">Auto completion</a></li>
<li><a class="reference internal" href="#libindy-wrapper">Libindy wrapper</a></li>
<li><a class="reference internal" href="#threading-model">Threading model</a></li>
<li><a class="reference internal" href="#execution-modes">Execution modes</a></li>
<li><a class="reference internal" href="#code-structure">Code structure</a></li>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#common-commands">Common commands</a><ul>
<li><a class="reference internal" href="#help">Help</a></li>
<li><a class="reference internal" href="#about">About</a></li>
<li><a class="reference internal" href="#exit">Exit</a></li>
<li><a class="reference internal" href="#prompt">Prompt</a></li>
<li><a class="reference internal" href="#show">Show</a></li>
<li><a class="reference internal" href="#load-plugin">Load Plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wallets-management-commands-wallet-group">Wallets management commands (wallet group)</a><ul>
<li><a class="reference internal" href="#wallet-create">Wallet create</a></li>
<li><a class="reference internal" href="#wallet-open">Wallet open</a></li>
<li><a class="reference internal" href="#wallet-close">Wallet close</a></li>
<li><a class="reference internal" href="#wallet-delete">Wallet delete</a></li>
<li><a class="reference internal" href="#wallet-list">Wallet list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#export-wallet">Export wallet</a></li>
<li><a class="reference internal" href="#import-wallet">Import wallet</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/indy-sdk/v1.5.0/doc/design/001-cli/README.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Michael McKean.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>