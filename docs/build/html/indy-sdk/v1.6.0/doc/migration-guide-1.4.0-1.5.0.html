
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Libindy 1.4 to 1.5 migration Guide &#8212; indy-docs 1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/sidebar.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <!-- markdownlint-disable MD033 --><div class="section" id="libindy-1-4-to-1-5-migration-guide">
<span id="libindy-1-4-to-1-5-migration-guide"></span><h1>Libindy 1.4 to 1.5 migration Guide<a class="headerlink" href="#libindy-1-4-to-1-5-migration-guide" title="Permalink to this headline">¶</a></h1>
<p>This document is written for developers using Libindy to provide necessary information and
to simplify their transition to Libindy 1.5 from Libindy 1.4. If you are using older Libindy
version you can check migration guides history:</p>
<ul class="simple">
<li><a class="reference external" href="#libindy-1.3-to-1.4-migration">Libindy 1.3 to 1.4 migration</a></li>
</ul>
<div class="section" id="table-of-contents">
<span id="table-of-contents"></span><h2>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="#notes">Notes</a></li>
<li><a class="reference external" href="#wallet-api">Wallet API</a></li>
<li><a class="reference external" href="#non-secrets-api">Non-Secrets API</a></li>
<li><a class="reference external" href="#payments-api">Payments API</a></li>
<li><a class="reference external" href="#pool-api">Pool API</a></li>
<li><a class="reference external" href="#ledger-api">Ledger API</a></li>
</ul>
</div>
<div class="section" id="notes">
<span id="notes"></span><h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>Migration information is organized in tables, there are mappings for each Libindy API part of how older version functionality maps to a newer one.
Functions from older version are listed in the left column, and the equivalent newer version function is placed in the right column:</p>
<ul class="simple">
<li>If some function had been added, the word ‘NEW’ would be placed in the left column.</li>
<li>If some function had been deleted, the word ‘DELETED’ would be placed in the right column.</li>
<li>If some function had been deprecated, the word ‘DEPRECATED’ would be placed in the right column.</li>
<li>If some function had been changed, the current format would be placed in the right column.</li>
<li>If some function had not been changed, the symbol ‘=’ would be placed in the right column.</li>
<li>To get more details about current format of a function click on the description above it.</li>
<li>Bellow are signatures of functions in Libindy C API.
The params of <code class="docutils literal notranslate"><span class="pre">cb</span></code> (except command_handle and err) will be result values of the similar function in any Libindy wrapper.</li>
</ul>
<div class="section" id="wallet-api">
<span id="wallet-api"></span><h3>Wallet API<a class="headerlink" href="#wallet-api" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In v1.4 libindy allowed to plug different wallet implementations. Plugged wallet in v1.4 handled both security
and storage layers. Libindy v1.5 restricts plugged interface by handling only storage layer.
All encryption is performed in libindy. It simplifies plugged wallets and provides warranty of a good security level
for 3d party wallets implementations.</li>
<li>Libindy v1.5 changes wallet format to allow efficient and flexible search for entities with pagination support.
<em>WARNING</em> wallet format of libindy v1.5 isn’t compatible with a wallet format of libindy v1.4.</li>
<li>There have been added functions that allow performing Export/Import of Wallet. Note these endpoints are EXPERIMENTAL.
Function signature and behavior may change in the future releases.</li>
<li><code class="docutils literal notranslate"><span class="pre">indy_list_wallets</span></code> endpoint is DEPRECATED and will be removed in the next release. The main idea is avoid
maintaining created wallet list on libindy side. It will allow to access wallets from a cluster and solve
some problems on mobile platforms. <code class="docutils literal notranslate"><span class="pre">indy_create_wallet</span></code> and <code class="docutils literal notranslate"><span class="pre">indy_open_wallet</span></code> endpoints will
also get related changes in the next release.</li>
</ul>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/hyperledger/indy-sdk/tree/master/doc/design/003-wallet-storage">Wallet Storage Design</a></li>
<li><a class="reference external" href="https://github.com/hyperledger/indy-sdk/tree/master/doc/design/009-wallet-export-import">Wallet Export/Import Design</a></li>
</ul>
<table>
  <tr>  
    <th>v1.4.0 - Wallet API</th>
    <th>v1.5.0 - Wallet API</th>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L11">
            Register custom wallet storage implementation
        </a>
    </th>
  </tr>
  <tr>
    <td>
      <pre>
indy_register_wallet_type(
        command_handle: i32,
        xtype: *const c_char,
        create: WalletCreate,
        open: WalletOpen,
        set: WalletSet,
        get: WalletGet,
        get_not_expired: WalletGetNotExpired,
        list: WalletList,
        close: WalletClose,
        delete: WalletDelete,
        free: WalletFree,
        cb: fn(xcommand_handle: i32,
             err: ErrorCode))
      </pre>
    </td>
    <td>
      <pre>
indy_register_wallet_storage(
        command_handle: i32,
        type_: *const c_char,
        create: WalletCreate,
        open: WalletOpen,
        close: WalletClose,
        delete: WalletDelete,
        add_record: WalletAddRecord,
        update_record_value: WalletUpdateRecordValue,
        update_record_tags: WalletUpdateRecordTags,
        add_record_tags: WalletAddRecordTags,
        delete_record_tags: WalletDeleteRecordTags,
        delete_record: WalletDeleteRecord,
        get_record: WalletGetRecord,
        get_record_id: WalletGetRecordId,
        get_record_type: WalletGetRecordType,
        get_record_value: WalletGetRecordValue,
        get_record_tags: WalletGetRecordTags,
        free_record: WalletFreeRecord,
        get_storage_metadata: WalletGetStorageMetadata,
        set_storage_metadata: WalletSetStorageMetadata,
        free_storage_metadata: WalletFreeStorageMetadata,
        search_records: WalletSearchRecords,
        search_all_records: WalletSearchAllRecords,
        get_search_total_count: WalletGetSearchTotalCount,
        fetch_search_next_record: WalletFetchSearchNextRecord,
        free_search: WalletFreeSearch,
        cb: fn(xcommand_handle: i32,
               err: ErrorCode))
      </pre>
    </td>
  </tr>
    <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L142">
            Create a new secure wallet
        </a>
    </th>
  <tr>
    <td>
      <pre>
indy_create_wallet(command_handle: i32,
                   pool_name: *const c_char,
                   name: *const c_char,
                   xtype: *const c_char,
                   config: *const c_char,
                   credentials: *const c_char,
                   cb: Option<extern fn(xcommand_handle: i32, err: ErrorCode)>)
      </pre>
    </td>
    <td>
      <pre>
indy_create_wallet(command_handle: i32,
                   pool_name: *const c_char,
                   name: *const c_char,
                   storage_type: *const c_char,
                   config: *const c_char,
                   credentials_json: *const c_char,
                   cb: Option<extern fn(xcommand_handle: i32,
                                        err: ErrorCode)>)
      </pre>
      <b>Note:</b> Signatures look similar, but <i>credentials_json</i> parameter became the required.
      Format of <i>config</i> and <i>credentials_json</i> parameters was changed.
    </td>
  </tr>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L210">
            Open the wallet with specific name
        </a>
    </th>
  <tr>
    <td>
      <pre>
indy_open_wallet(command_handle: i32,
                 name: *const c_char,
                 runtime_config: *const c_char,
                 credentials: *const c_char,
                 cb: Option<extern fn(xcommand_handle: i32, err: ErrorCode, handle: i32)>)
      </pre>
    </td>
    <td>
      <pre>
indy_open_wallet(command_handle: i32,
                 name: *const c_char,
                 runtime_config: *const c_char,
                 credentials_json: *const c_char,
                 cb: Option<extern fn(xcommand_handle: i32,
                                      err: ErrorCode,
                                      handle: i32)>)
      </pre>
      <b>Note:</b> Signatures look similar, but <i>credentials_json</i> parameter became the required.
      Format of <i>credentials_json</i> parameter was changed.
    </td>
  </tr>
    <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L475">
            Deletes created wallet
        </a>
    </th>
  <tr>
    <td>
      <pre>
indy_delete_wallet(command_handle: i32,
                   name: *const c_char,
                   credentials: *const c_char,
                   cb: Option<extern fn(xcommand_handle: i32, err: ErrorCode)>)
      </pre>
    </td>
    <td>
      <pre>
indy_delete_wallet(command_handle: i32,
                   name: *const c_char,
                   credentials_json: *const c_char,
                   cb: Option<extern fn(xcommand_handle: i32,
                                        err: ErrorCode)>)
      </pre>
      <b>Note:</b> Signatures look similar, but <i>credentials_json</i> parameter became the required.
      Format of <i>credentials_json</i> parameter was changed.
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L311">
            Export wallet
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_export_wallet(command_handle: i32,
                   wallet_handle: i32,
                   export_config_json: *const c_char,
                   cb: fn(xcommand_handle: i32, err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/wallet.rs#L359">
            Import wallet
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_import_wallet(command_handle: i32,
                   pool_name: *const c_char,
                   name: *const c_char,
                   storage_type: *const c_char,
                   config: *const c_char,
                   credentials: *const c_char,
                   import_config_json: *const c_char,
                   cb: fn(xcommand_handle: i32, err: ErrorCode))
        </pre>
    </td>
  </tr>
</table></div>
<div class="section" id="non-secrets-api">
<span id="non-secrets-api"></span><h3>Non-Secrets API<a class="headerlink" href="#non-secrets-api" title="Permalink to this headline">¶</a></h3>
<p>Libindy v1.5 introduces set of API endpoints are intended to store and read application specific
identity data in the wallet. This API doesn’t have an access to secrets stored in the wallet.</p>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/hyperledger/indy-sdk/tree/master/doc/design/003-wallet-storage">Wallet Storage Design</a></li>
</ul>
<table>  
  <tr>
    <th>v1.4.0 - Non-Secrets API</th>
    <th>v1.5.0 - Non-Secrets API</th>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L12">
            Create a new record in the wallet
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_add_wallet_record(command_handle: i32,
                       wallet_handle: i32,
                       type_: *const c_char,
                       id: *const c_char,
                       value: *const c_char,
                       tags_json: *const c_char,
                       cb: fn(command_handle_: i32,
                              err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L71">
            Update a wallet record value
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_update_wallet_record_value(command_handle: i32,
                                wallet_handle: i32,
                                type_: *const c_char,
                                id: *const c_char,
                                value: *const c_char,
                                cb: fn(command_handle_: i32,
                                       err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L116">
            Update a wallet record tags
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_update_wallet_record_tags(command_handle: i32,
                               wallet_handle: i32,
                               type_: *const c_char,
                               id: *const c_char,
                               tags_json: *const c_char,
                               cb: fn(command_handle_: i32,
                                      err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L170">
            Add new tags to the wallet record
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_add_wallet_record_tags(command_handle: i32,
                            wallet_handle: i32,
                            type_: *const c_char,
                            id: *const c_char,
                            tags_json: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L226">
            Delete tags from the wallet record
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_delete_wallet_record_tags(command_handle: i32,
                               wallet_handle: i32,
                               type_: *const c_char,
                               id: *const c_char,
                               tag_names_json: *const c_char,
                               cb: fn(command_handle_: i32,
                                      err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L272">
            Delete an existing wallet record in the wallet
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_delete_wallet_record(command_handle: i32,
                          wallet_handle: i32,
                          type_: *const c_char,
                          id: *const c_char,
                          cb: fn(command_handle_: i32,
                                 err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L313">
            Get an wallet record by id
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_get_wallet_record(command_handle: i32,
                       wallet_handle: i32,
                       type_: *const c_char,
                       id: *const c_char,
                       options_json: *const c_char,
                       cb: fn(command_handle_: i32,
                              err: ErrorCode,
                              record_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L373">
            Search for wallet records
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_open_wallet_search(command_handle: i32,
                        wallet_handle: i32,
                        type_: *const c_char,
                        query_json: *const c_char,
                        options_json: *const c_char,
                        cb: fn(command_handle_: i32,
                               err: ErrorCode,
                               search_handle: i32))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L439">
            Fetch next records for wallet search.
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_fetch_wallet_search_next_records(command_handle: i32,
                                      wallet_handle: i32,
                                      wallet_search_handle: i32,
                                      count: usize,
                                      cb: fn(command_handle_: i32,
                                             err: ErrorCode,
                                             records_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/non_secrets.rs#L493">
            Close wallet search
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_close_wallet_search(command_handle: i32,
                         wallet_search_handle: i32,
                         cb: fn(command_handle_: i32,
                                err: ErrorCode))
        </pre>
    </td>
  </tr>
</table></div>
<div class="section" id="payments-api">
<span id="payments-api"></span><h3>Payments API<a class="headerlink" href="#payments-api" title="Permalink to this headline">¶</a></h3>
<p>This API is intended to provide the ability to register custom payment method and then to perform the main payments operations:</p>
<ul class="simple">
<li>Creation of payment address</li>
<li>Listing of payment addresses</li>
<li>Getting list of UTXO for payment address</li>
<li>Sending payment transaction</li>
<li>Adding fees to transactions</li>
<li>Getting transactions fees amount</li>
</ul>
<p>Note all endpoints in this group are EXPERIMENTAL. Function signatures and behavior may change
in the future releases.</p>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/hyperledger/indy-sdk/tree/master/doc/design/004-payment-interface">Payment Interface Design</a></li>
</ul>
<table>
  <tr>
    <th>v1.4.0 - Payments API</th>
    <th>v1.5.0 - Payments API</th>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L264">
            Register custom payment implementation
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_register_payment_method(command_handle: i32,
                             payment_method: *const c_char,
                             create_payment_address: CreatePaymentAddressCB,
                             add_request_fees: AddRequestFeesCB,
                             parse_response_with_fees: ParseResponseWithFeesCB,
                             build_get_utxo_request: BuildGetUTXORequestCB,
                             parse_get_utxo_response: ParseGetUTXOResponseCB,
                             build_payment_req: BuildPaymentReqCB,
                             parse_payment_response: ParsePaymentResponseCB,
                             build_mint_req: BuildMintReqCB,
                             build_set_txn_fees_req: BuildSetTxnFeesReqCB,
                             build_get_txn_fees_req: BuildGetTxnFeesReqCB,
                             parse_get_txn_fees_response: ParseGetTxnFeesResponseCB,
                             cb: fn(command_handle_: i32,
                                    err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L345">
            Create the payment address for specified payment method
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_create_payment_address(command_handle: i32,
                            wallet_handle: i32,
                            payment_method: *const c_char,
                            config: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   payment_address: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L404">
            Lists all payment addresses that are stored in the wallet
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_list_payment_addresses(command_handle: i32,
                            wallet_handle: i32,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   payment_addresses_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L444">
            Modifies Indy request by adding information how to pay fees for this transaction
            according to selected payment method
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_add_request_fees(command_handle: i32,
                      wallet_handle: i32,
                      submitter_did: *const c_char,
                      req_json: *const c_char,
                      inputs_json: *const c_char,
                      outputs_json: *const c_char,
                      cb: fn(command_handle_: i32,
                             err: ErrorCode,
                             req_with_fees_json: *const c_char,
                             payment_method: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L521">
            Parses response for Indy request with fees
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_parse_response_with_fees(command_handle: i32,
                              payment_method: *const c_char,
                              resp_json: *const c_char,
                              cb: fn(command_handle_: i32,
                                     err: ErrorCode,
                                     utxo_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L568">
            Builds Indy request for getting UTXO list for payment address
            according to this payment method
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_get_utxo_request(command_handle: i32,
                            wallet_handle: i32,
                            submitter_did: *const c_char,
                            payment_address: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   get_utxo_txn_json: *const c_char,
                                   payment_method: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L618">
            Parses response for Indy request for getting UTXO list
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_parse_get_utxo_response(command_handle: i32,
                             payment_method: *const c_char,
                             resp_json: *const c_char,
                             cb: fn(command_handle_: i32,
                                    err: ErrorCode,
                                    utxo_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L666">
            Builds Indy request for doing tokens payment according to this payment method
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_payment_req(command_handle: i32,
                       wallet_handle: i32,
                       submitter_did: *const c_char,
                       inputs_json: *const c_char,
                       outputs_json: *const c_char,
                       cb: fn(command_handle_: i32,
                              err: ErrorCode,
                              payment_req_json: *const c_char,
                              payment_method: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L723">
            Parses response for Indy request for payment txn
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_parse_payment_response(command_handle: i32,
                            payment_method: *const c_char,
                            resp_json: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   utxo_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L782">
            Builds Indy request for doing tokens minting according to this payment method
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_mint_req(command_handle: i32,
                    wallet_handle: i32,
                    submitter_did: *const c_char,
                    outputs_json: *const c_char,
                    cb: fn(command_handle_: i32,
                           err: ErrorCode,
                           mint_req_json: *const c_char,
                           payment_method: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L837">
            Builds Indy request for setting fees for transactions in the ledger
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_set_txn_fees_req(command_handle: i32,
                            wallet_handle: i32,
                            submitter_did: *const c_char,
                            payment_method: *const c_char,
                            fees_json: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   set_txn_fees_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L892">
            Builds Indy get request for getting fees for transactions in the ledger
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_get_txn_fees_req(command_handle: i32,
                            wallet_handle: i32,
                            submitter_did: *const c_char,
                            payment_method: *const c_char,
                            cb: fn(command_handle_: i32,
                                   err: ErrorCode,
                                   get_txn_fees_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/payments.rs#L939">
            Parses response for Indy request for getting fees
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_parse_get_txn_fees_response(command_handle: i32,
                                 payment_method: *const c_char,
                                 resp_json: *const c_char,
                                 cb: fn(command_handle_: i32,
                                        err: ErrorCode,
                                        fees_json: *const c_char))
        </pre>
    </td>
  </tr>
</table></div>
<div class="section" id="pool-api">
<span id="pool-api"></span><h3>Pool API<a class="headerlink" href="#pool-api" title="Permalink to this headline">¶</a></h3>
<p>The next stable release 1.4 of Indy-Node contains breaking changes related to the transaction format.
The changes are done for better versioning support (to support compatibility in the future) and more
readable format of data (separating payload data, metadata and signature).</p>
<p>LibIndy 1.5 supports both Indy Node protocols Indy Node v1.3 (version 1) and v1.4 (version 2).
There is a global property PROTOCOL_VERSION that used in every request to the pool:</p>
<ul class="simple">
<li>PROTOCOL_VERSION=1 for IndyNode 1.3</li>
<li>PROTOCOL_VERSION=2 for IndyNode 1.4</li>
</ul>
<p>To switch between protocol versions used libindy 1.5 provides new <code class="docutils literal notranslate"><span class="pre">indy_set_protocol_version</span></code> endpoint:</p>
<ul class="simple">
<li>By default LibIndy 1.5 is compatible with Indy Node 1.3, and not 1.4</li>
<li>LibIndy 1.5 can become compatible with Indy Node 1.4 if <code class="docutils literal notranslate"><span class="pre">indy_set_protocol_version(2)</span></code>
is called during app initialization.</li>
<li>An application can freely update to LibIndy 1.5 and still use stable Node 1.3</li>
<li>If an app wants to work with the latest master or Stable Node 1.4, then it needs to
support breaking changes (there are not so many, mostly a new reply for write txns as txn format is changed).
See References.</li>
</ul>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/hyperledger/indy-node/blob/master/docs/1.3_to_1.4_migration_guide.md">Indy-Node 1.3 to 1.4 Migration Guide</a></li>
</ul>
<table>
  <tr>
    <th>v1.4.0 - Pool API</th>
    <th>v1.5.0 - Pool API</th>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/pool.rs#L263">
            Set protocol version
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_set_protocol_version(command_handle: i32,
                          protocol_version: usize,
                          cb: fn(xcommand_handle: i32,
                                 err: ErrorCode))
        </pre>
    </td>
  </tr>
</table></div>
<div class="section" id="ledger-api">
<span id="ledger-api"></span><h3>Ledger API<a class="headerlink" href="#ledger-api" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">indy_multi_sign_request</span></code> was added to Libindy Pool API to allow signing of requests by multiple identity owners.</li>
<li><code class="docutils literal notranslate"><span class="pre">indy_build_get_validator_info_request</span></code> was added to allow building of VALIDATOR_INFO action request. See References.</li>
<li><code class="docutils literal notranslate"><span class="pre">indy_build_pool_restart_request</span></code> was added to allow building of POOL_RESTART action request. See References.</li>
<li><code class="docutils literal notranslate"><span class="pre">indy_register_transaction_parser_for_sp</span></code> endpoint was added to allow usage of
StateProof optimization in Client-Node communication with a custom transactions that can be added by
Node plugins.</li>
<li><code class="docutils literal notranslate"><span class="pre">indy_build_get_txn_request</span></code> endpoint was changed to allow reading of non-domain ledgers transactions</li>
</ul>
<p>References:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/hyperledger/indy-node/blob/master/docs/requests.md#action-requests">Indy Node Action Requests Design</a></li>
</ul>
<table>
  <tr>
    <th colspan="2">v1.4.0 - Ledger API</th>
    <th colspan="2">v1.5.0 - Ledger API</th>
  </tr>  
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/ledger.rs#L178">
            Multi signs request message
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_multi_sign_request(command_handle: i32,
                        wallet_handle: i32,
                        submitter_did: *const c_char,
                        request_json: *const c_char,
                        cb: fn(xcommand_handle: i32,
                               err: ErrorCode,
                               signed_request_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/ledger.rs#L892">
            Builds a GET_VALIDATOR_INFO request
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td>
      <pre>
indy_build_get_validator_info_request(command_handle: i32,
                                      submitter_did: *const c_char,
                                      cb: fn(xcommand_handle: i32,
                                             err: ErrorCode,
                                             request_json: *const c_char))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/ledger.rs#L1029">
            Builds a POOL_RESTART request
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td colspan="2">
      <pre>
indy_build_pool_restart_request(command_handle: i32,
                                submitter_did: *const c_char,
                                action: *const c_char,
                                datetime: *const c_char,
                                cb: fn(xcommand_handle: i32,
                                       err: ErrorCode,
                                       request_json: *const c_char))
        </pre>
    </td>
  </tr>  
  <tr>
    <th colspan="2">
        <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/ledger.rs#L1644">
            Register custom callbacks for parsing of state proofs
        </a>
    </th>
  </tr>
  <tr>
    <td><b>NEW</b></td>
    <td colspan="2">
      <pre>
indy_register_transaction_parser_for_sp(command_handle: i32,
                                        txn_type: *const c_char,
                                        parser: CustomTransactionParser,
                                        free: CustomFree,
                                        cb: fn(command_handle_: i32,
                                               err: ErrorCode))
        </pre>
    </td>
  </tr>
  <tr>
    <th colspan="2">
      <a href="https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/api/ledger.rs#L925">
        Builds a GET_TXN request. Request to get any transaction by its seq_no
      </a>
    </th>
  </tr>
  <tr>
    <td>
      <pre>
indy_build_get_txn_request(
            command_handle: i32,
            submitter_did: *const c_char,
            seq_no: i32,
            cb: fn(xcommand_handle: i32,
                   err: ErrorCode,
                   request_json: *const c_char))
      </pre>
    </td>
    <td>
      <pre>
indy_build_get_txn_request(
            command_handle: i32,
            submitter_did: *const c_char,
            ledger_type: *const c_char,
            seq_no: i32,
            cb: fn(xcommand_handle: i32,
                   err: ErrorCode,
                   request_json: *const c_char))
      </pre>
      <b>Note:</b> ledger_type parameter was added to provide a string identifier of a target ledger.
    </td>
  </tr>
</table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Libindy 1.4 to 1.5 migration Guide</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of contents</a></li>
<li><a class="reference internal" href="#notes">Notes</a><ul>
<li><a class="reference internal" href="#wallet-api">Wallet API</a></li>
<li><a class="reference internal" href="#non-secrets-api">Non-Secrets API</a></li>
<li><a class="reference internal" href="#payments-api">Payments API</a></li>
<li><a class="reference internal" href="#pool-api">Pool API</a></li>
<li><a class="reference internal" href="#ledger-api">Ledger API</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/indy-sdk/v1.6.0/doc/migration-guide-1.4.0-1.5.0.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Michael McKean.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>