
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Indy-SDK Default Wallet Implementation &#8212; indy-docs 1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/sidebar.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="indy-sdk-default-wallet-implementation">
<span id="indy-sdk-default-wallet-implementation"></span><h1>Indy-SDK Default Wallet Implementation<a class="headerlink" href="#indy-sdk-default-wallet-implementation" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this implementation is to provide a default encrypted wallet for <strong>indy-sdk</strong>.</p>
<p>The <strong>indy-sdk</strong> default wallet implementation uses hardened version of <a class="reference external" href="https://www.zetetic.net/sqlcipher/">SQLCipher</a>:</p>
<ul class="simple">
<li>HMAC-SHA256 instead of HMAC-SHA1.</li>
<li>PBKDF2 100K rounds for passphrase key data instead of 64K.</li>
<li>PBKDF2 10 rounds for HMAC key derivation instead of 2.</li>
<li>Page size 2K instead of 1K.</li>
</ul>
<div class="section" id="key-credentials">
<span id="key-credentials"></span><h2>Key Credentials<a class="headerlink" href="#key-credentials" title="Permalink to this headline">¶</a></h2>
<p>The default wallet allows an optional passphrase to used for encrypting the data.
If no passphrase is provided either by leaving the key blank or omitting the key, the wallet will not be encrypted but stored in <a class="reference external" href="https://www.sqlite.org/index.html">SQLite3</a> format.
The passphrase to open the wallet is stored outside of <strong>indy-sdk</strong> and is left to the consumer’s security preference such as HSMs, TEEs, or offline methods.</p>
<p><strong>indy-sdk</strong> supports a JSON parameter, <em>credentials</em>, for opening or creating a wallet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;passphrase&gt;&quot;</span>
   <span class="s2">&quot;rekey&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;passphrase&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the <em>credentials</em> parameter is omitted or if <em>key</em> is an empty string, the wallet is left unencrypted.</p>
<p><em>key</em> is the passphrase for opening the wallet and will be run through 100K rounds of PBKDF2.</p>
<p>If <em>rekey</em> is provided, the wallet will be opened using <em>key</em> and change the passphrase to the <em>rekey</em> value for future open calls.
<em>rekey</em> is only required for an existing wallet and throws an error when attempting to create a new wallet.</p>
<p>If <em>rekey</em> is included with [<em>null</em>, <em>“”</em>], the wallet will be decrypted.</p>
<p>If <em>key</em> is [<em>null</em>, <em>“”</em>] and <em>rekey</em> contains a non-empty value, the wallet will now be encrypted.</p>
<div class="section" id="note">
<span id="note"></span><h3>NOTE<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p><em>rekey</em> is only necessary when changing <em>key</em>. Otherwise it should be omitted.</p>
</div>
</div>
<div class="section" id="cases">
<span id="cases"></span><h2>Cases<a class="headerlink" href="#cases" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normal-wallet-no-passphrase">
<span id="normal-wallet-no-passphrase"></span><h3>Normal wallet / No passphrase<a class="headerlink" href="#normal-wallet-no-passphrase" title="Permalink to this headline">¶</a></h3>
<p>To create a non-encrypted wallet, <em>credentials</em> can be empty or not specified. <em>key</em> may also be [<em>null</em>, <em>“”</em>].</p>
</div>
<div class="section" id="encrypted-wallet-a-key">
<span id="encrypted-wallet-a-key"></span><h3>Encrypted wallet / A Key<a class="headerlink" href="#encrypted-wallet-a-key" title="Permalink to this headline">¶</a></h3>
<p>Encrypted wallets require a passphrase to be specified in the <em>key</em> field.
Passphrase can be any non-blank value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;Th1sIsArEALLY$3cuR3PassW0RD&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="normal-wallet-to-encrypted-wallet-adding-a-key">
<span id="normal-wallet-to-encrypted-wallet-adding-a-key"></span><h3>Normal wallet to encrypted wallet / Adding a Key<a class="headerlink" href="#normal-wallet-to-encrypted-wallet-adding-a-key" title="Permalink to this headline">¶</a></h3>
<p>To add encryption to an existing non-encrypted wallet, <em>key</em> must be set to [<em>null</em>, <em>“”</em>] and <em>rekey</em> must be set to a valid passphrase.
Then wallet open calls are the same as the <em>Encrypted Wallet</em> section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;rekey&quot;</span><span class="p">:</span> <span class="s2">&quot;il0V3MyN3WpA$SworD&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="encrypted-wallet-to-normal-wallet-removing-a-key">
<span id="encrypted-wallet-to-normal-wallet-removing-a-key"></span><h3>Encrypted wallet to normal wallet / Removing a Key<a class="headerlink" href="#encrypted-wallet-to-normal-wallet-removing-a-key" title="Permalink to this headline">¶</a></h3>
<p>To remove encryption from an existing encrypted wallet, <em>key</em> must be set to the current value and <em>rekey</em> must be set to a blank value [<em>null</em>, <em>“”</em>].
Then wallet open calls are the same as the <em>Normal wallet</em> section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;Th1sIsArEALLY$3cuR3PassW0RD&quot;</span><span class="p">,</span>
   <span class="s2">&quot;rekey&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="updating-passphrase-changing-a-key">
<span id="updating-passphrase-changing-a-key"></span><h3>Updating passphrase / Changing a Key<a class="headerlink" href="#updating-passphrase-changing-a-key" title="Permalink to this headline">¶</a></h3>
<p>Rotating wallet passphrases is recommended. <em>key</em> must be set to the current value and <em>rekey</em> must be set to the new value.
Then wallet open calls are the same as the <em>Encrypted wallet</em> section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;Th1sIsArEALLY$3cuR3PassW0RD&quot;</span><span class="p">,</span>
   <span class="s2">&quot;rekey&quot;</span><span class="p">:</span> <span class="s2">&quot;s8c0R31tYi$hARd&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Indy-SDK Default Wallet Implementation</a><ul>
<li><a class="reference internal" href="#key-credentials">Key Credentials</a><ul>
<li><a class="reference internal" href="#note">NOTE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cases">Cases</a><ul>
<li><a class="reference internal" href="#normal-wallet-no-passphrase">Normal wallet / No passphrase</a></li>
<li><a class="reference internal" href="#encrypted-wallet-a-key">Encrypted wallet / A Key</a></li>
<li><a class="reference internal" href="#normal-wallet-to-encrypted-wallet-adding-a-key">Normal wallet to encrypted wallet / Adding a Key</a></li>
<li><a class="reference internal" href="#encrypted-wallet-to-normal-wallet-removing-a-key">Encrypted wallet to normal wallet / Removing a Key</a></li>
<li><a class="reference internal" href="#updating-passphrase-changing-a-key">Updating passphrase / Changing a Key</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/indy-sdk/v1.6.3/doc/default-wallet.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">indy-docs 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Michael McKean.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>